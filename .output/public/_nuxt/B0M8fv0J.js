import{o as r,c as a,a as e,q as R,v as Q,s as G,u as O,r as u,x as B,y as g,Q as d,z as H,A as f,b as $,B as C,d as A,t as _,F as L,C as J,D as V,E as N,P as T,R as U,G as K}from"./BqxEbK7z.js";const W={class:"border border-red-700 py-20 px-40 rounded-md"},X={class:"form-list"},Y={class:"form-item"},Z={class:"mb-4"},ee=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"testotkt"}," Testo del ticket ",-1),te=["value"],oe=["value"],se={class:"form-item"},le={class:"mb-4"},re=e("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"password"}," Urgente ",-1),ae={class:"col-span-2 mt-5"},ne={class:"inline-flex items-center me-5 cursor-pointer"},ie=["checked"],de=e("div",{class:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-red-300 dark:peer-focus:ring-red-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-red-600"},null,-1),ce={class:"buttons-list u-margin-block-start-16"},ue={class:"buttons-list-item text-center"},fe=e("button",{class:"bg-green-700 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline","aria-label":"invia",type:"submit"}," Modifica ",-1),he={__name:"modifyForm",props:{modifica:{type:Function,required:!0},chiudi:{type:Function,required:!0},myData:{type:Array,required:!0}},setup(c){return(o,s)=>(r(),a("div",W,[e("form",{class:"form",onSubmit:s[2]||(s[2]=G((...n)=>c.modifica&&c.modifica(...n),["prevent"]))},[e("ul",X,[e("li",Y,[e("div",Z,[ee,e("input",{class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"testotkt",type:"text",name:"testotkt",value:c.myData.testo_tkt,required:""},null,8,te),e("input",{type:"hidden",id:"ticketid",name:"ticketid",value:c.myData.$id},null,8,oe)])]),e("li",se,[e("div",le,[re,e("div",ae,[e("div",null,[e("label",ne,[R(e("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=n=>o.urgente=n),id:"urgente",name:"urgente",checked:c.myData.urgente_tkt,class:"sr-only peer"},null,8,ie),[[Q,o.urgente]]),de])])])])])]),e("ul",ce,[e("li",ue,[fe,e("button",{class:"ml-7 bg-red-700 hover:bg-red-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline","aria-label":"invia",onClick:s[1]||(s[1]=(...n)=>c.chiudi&&c.chiudi(...n))}," Chiudi ")])])],32)]))}},me={key:0},be={class:"fixed hidden insert-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full",id:"modal"},ge={class:"relative top-20 mx-auto p-5 border w-3/4 h-3/4 shadow-lg rounded-md bg-white"},_e={class:"container mx-auto"},pe={key:0},ve={class:"text-4xl text-center mt-20"},ye={class:"my-10"},ke={key:0,class:"text-center text-xl font-bold mb-3"},xe={key:1,class:"text-center"},we=e("h3",{class:"mb-5 text-lg font-medium text-gray-900"},"Selezione ticket",-1),$e=V('<label for="hosting-small" class="inline-flex items-center justify-between w-full p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer peer-checked:border-red-600 peer-checked:text-red-600 hover:text-gray-600 hover:bg-gray-100"><div class="block"><div class="w-full text-lg font-semibold">Solo i miei</div><div class="w-full">Solo i tuoi ticket</div></div><svg class="w-5 h-5 ms-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"></path></svg></label>',1),De=V('<label for="hosting-big" class="inline-flex items-center justify-between w-full p-5 text-gray-500 bg-white border border-gray-200 rounded-lg cursor-pointer peer-checked:border-blue-600 peer-checked:text-blue-600 hover:text-gray-600 hover:bg-gray-100"><div class="block"><div class="w-full text-lg font-semibold">Di ufficio</div><div class="w-full">Tutti i ticket del tuo ufficio</div></div><svg class="w-5 h-5 ms-3 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 10"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5h12m0 0L9 1m4 4L9 9"></path></svg></label>',1),Ce={class:"table-auto w-full text-center border-collapse border border-slate-400"},Ae=e("thead",null,[e("tr",{class:"bg-slate-100"},[e("th",{class:"border border-slate-300 p-3"}," # "),e("th",{class:"border border-slate-300 p-3"},"Problema"),e("th",{class:"border border-slate-300 p-3"},"Contatto"),e("th",{class:"border border-slate-300 p-3"},"Ufficio"),e("th",{class:"border border-slate-300 p-3"},"Data"),e("th",{class:"border border-slate-300 p-3"},"Urgente ?")])],-1),Me=["onClick"],Se={class:"text-left border border-slate-300 p-2"},qe={class:"text-left border border-slate-300 p-2"},Be={class:"text-left border border-slate-300 p-2"},Le={class:"text-left border border-slate-300 p-2"},Ne={class:"text-center border border-slate-300 p-2"},Te={class:"border border-slate-300 p-2"},Ue={key:0},Ve={key:1},Fe={key:1},ze=e("div",{class:""},[e("h3",{class:"text-2xl text-center my-20"},[A(" Vai alla "),e("a",{class:"underline hover:no-underline",href:"/login"},"pagina di login"),A(" per vedere e inserire nuovi ticket!! ")])],-1),Ee=[ze],Pe={__name:"home",async setup(c){let o,s;const n=O(),h="65f2a2fe1bd0213a013d",m="65f2a3080aea978dbc04",i=u(),p=u(),v=u(),y=u();u("underline");const D=u([]);u(),y.value=([o,s]=B(()=>N.get()),o=await o,s(),o);const M=([o,s]=B(()=>N.getPrefs()),o=await o,s(),o);for(const t in M)p.value=M[t];y.value.name=="admin"?(i.value=g.listDocuments(h,m,[d.orderDesc("$createdAt")]),v.value=n.current.value.providerUid,console.log("ADMIN!")):n.current.value?(console.log("utente connesso!"),i.value=g.listDocuments(h,m,[d.equal("ufficio_tkt",p.value),d.orderDesc("$createdAt")]),v.value=n.current.value.providerUid):(console.log("utente NON connesso!"),i.value=g.listDocuments(h,m,[d.orderDesc("$createdAt")]));const w=u();function F(t){D.value=t,console.log(D.value);let l=document.getElementById("modal");l.style.display="block"}function z(){console.log(testotkt.value),console.log(urgente.checked);let t={testo_tkt:testotkt.value,urgente_tkt:urgente.checked},l=ticketid.value;console.log(l),E(t,l)&&(console.log("update con successo!!!"),S());let k=document.getElementById("modal");k.style.display="none"}const E=(t,l)=>g.updateDocument(h,m,l,t,[T.update(U.user("65f3f1fd6345a3b7c4fc")),T.delete(U.user("65f3f1fd6345a3b7c4fc"))]);function I(){let t=document.getElementById("modal");t.style.display="none"}function j(){console.log("solo i miei tickets..... "+y.name),i.value=g.listDocuments(h,m,[d.equal("contatto_tkt",v.value),d.orderDesc("$createdAt")]),i.value.then(function(t){w.value=t.documents})}function S(){console.log(".....tickets ufficio "),y.value.name=="admin"?i.value=g.listDocuments(h,m,[d.orderDesc("$createdAt")]):i.value=g.listDocuments(h,m,[d.equal("ufficio_tkt",p.value)],[d.orderDesc("$createdAt")]),i.value.then(function(t){w.value=t.documents})}function P(t){const l=new Date(t),k=l.toLocaleString("default",{year:"numeric"}),x=l.toLocaleString("default",{month:"2-digit"});return`${l.toLocaleString("default",{day:"2-digit"})}.${x}.${k}`}return H(()=>{i.value.then(function(t){w.value=t.documents},function(t){console.log(t)})}),(t,l)=>{const k=he,x=K;return r(),a(L,null,[f(y).name=="admin"?(r(),a("div",me,[e("div",be,[e("div",ge,[$(k,{myData:f(D),modifica:z,chiudi:I},null,8,["myData"])])])])):C("",!0),e("div",_e,[f(n).current.value?(r(),a("div",pe,[e("h1",ve,[A(" Ticket aperti "),$(x,{name:"material-symbols-light:event-list-outline",size:"1.5em"})]),e("div",ye,[f(p)?(r(),a("p",ke,"ufficio: "+_(f(p)),1)):C("",!0),f(v)?(r(),a("p",xe,"user: "+_(f(v)),1)):C("",!0)]),e("div",{class:"my-10"},[we,e("ul",{class:"grid w-full gap-6 md:grid-cols-2"},[e("li",null,[e("input",{type:"radio",id:"hosting-small",name:"hosting",value:"hosting-small",onClick:j,class:"hidden peer",required:""}),$e]),e("li",null,[e("input",{type:"radio",id:"hosting-big",name:"hosting",checked:"",value:"hosting-big",onClick:S,class:"hidden peer"}),De])])]),e("table",Ce,[Ae,e("tbody",null,[(r(!0),a(L,null,J(f(w),(b,q)=>(r(),a("tr",{onClick:Ie=>F(b),key:q},[e("td",Se,_(q),1),e("td",qe,_(b.testo_tkt),1),e("td",Be,_(b.contatto_tkt),1),e("td",Le,_(b.ufficio_tkt),1),e("td",Ne,_(P(b.$createdAt)),1),e("td",Te,[b.urgente_tkt==!0?(r(),a("span",Ue,[$(x,{name:"material-symbols-light:arrow-circle-up",color:"red",size:"2em"})])):(r(),a("span",Ve,[$(x,{name:"material-symbols-light:arrow-circle-down",color:"green",size:"2em"})]))])],8,Me))),128))])])])):(r(),a("div",Fe,Ee))])],64)}}};export{Pe as default};
